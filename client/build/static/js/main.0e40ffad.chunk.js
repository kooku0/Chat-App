(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{123:function(e,t,n){"use strict";var a=n(51),r=n(141),c=n.n(r),o={endPoint:"",socket:null};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.a:var n=c()(t.payload);return{endPoint:t.payload,socket:n};default:return e}}},138:function(e,t){},143:function(e,t,n){e.exports=n(276)},152:function(e,t,n){},153:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},157:function(e,t,n){},158:function(e,t,n){},163:function(e,t){},165:function(e,t){},199:function(e,t){},200:function(e,t){},21:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return i})),n.d(t,"h",(function(){return u})),n.d(t,"g",(function(){return l}));var a="login/LOAD_LOGIN",r="login/FAIL_LOGIN",c="login/SUCCESS_LOGIN",o="login/LOGOUT",s=function(){return{type:a}},i=function(){return{type:r}},u=function(e,t){return{type:c,payload:{name:e,socketId:t}}},l=function(){return{type:o}}},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s}));var a="rooms/ADD_ROOM",r="rooms/REMOVE_ROOM",c="rooms/JOIN_ROOM",o="rooms/SET_ROOMS",s=function(e){return{type:o,payload:e}}},24:function(e,t,n){"use strict";var a=n(80);n.d(t,"default",(function(){return a.a}));var r=n(21);n.d(t,"failLogin",(function(){return r.e})),n.d(t,"loadLogin",(function(){return r.f})),n.d(t,"logout",(function(){return r.g})),n.d(t,"successLogin",(function(){return r.h}));n(81)},244:function(e,t,n){},271:function(e,t){},275:function(e,t,n){},276:function(e,t,n){"use strict";n.r(t);var a,r,c=n(0),o=n.n(c),s=n(49),i=n.n(s),u=n(4),l=n(52),m=n(19);!function(e){e.LOGIN_STORE="authStore",e.SOCKETIO_STORE="socketIOStore",e.MESSAGES_STORE="messagesStore",e.ROOMS_STORE="roomsStore"}(a||(a={})),function(e){e.SIGNUP="/signup",e.SIGNIN="/signin",e.ROOM_LIST="/room-list",e.CHAT="/chat/:id"}(r||(r={}));var d=n(23),f=n(24),g=n(29);n(152);var v=function(e){var t=e.history,n=function(){var e=Object(u.c)((function(e){return e.socketIO.socket})),t=Object(u.b)();return{onLogin:function(n){t(Object(f.loadLogin)()),null===e||void 0===e||e.emit("login",n,(function(a){t(Object(f.successLogin)(n,e.id)),t(Object(g.setRooms)(a))})),null===e||void 0===e||e.on("error",(function(e){"websocket: close sent"!=e.error()&&(console.log("An unexpected error occured: ",e.error()),t(Object(f.failLogin)()))}))},onLogout:function(){t(Object(f.logout)())}}}().onLogin,a=Object(c.useState)(""),r=Object(d.a)(a,2),s=r[0],i=r[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"col-md-8 col-xl-6 chat"},o.a.createElement("div",{className:"card container-sm container-sign"},o.a.createElement("form",{className:"form-sign",onSubmit:function(e){e.preventDefault(),e.stopPropagation(),n(s),i(""),t.push("/room-list")}},o.a.createElement("h5",{className:"form-headline"},"\ud83d\udcac \ub85c\uadf8\uc778 \ud83d\udc8c"),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"text",className:"form-control",placeholder:"\ub2c9\ub124\uc784 \uc785\ub825",value:s,onChange:function(e){i(e.target.value)}})),o.a.createElement("button",{className:"btn btn-block btn-primary"},"\ub85c\uadf8\uc778 \ud558\uae30"),o.a.createElement("h6",{className:"txt-terms"},o.a.createElement("a",{href:"#"},"\uc774\uc6a9\uc57d\uad00")," \ubc0f ",o.a.createElement("a",{href:"#"},"\uac1c\uc778\uc815\ubcf4")," \ucde8\uae09\ubc29\uce68")))))};n(153);var p=function(e){var t=e.roomName,n=e.onChange,a=e.onKeyDown,r=e.toggleCheck;return o.a.createElement("div",{className:"card-header"},o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"text",placeholder:"\ucc44\ud305\ubc29 \ucd94\uac00 \ubc0f \ucc38\uc5ec",name:"",className:"form-control search",value:t,onChange:n,onKeyDown:a}),o.a.createElement("div",{className:"input-group-prepend"},o.a.createElement("span",{className:"input-group-text search_btn"},o.a.createElement("i",{className:"fas fa-plus"})))),o.a.createElement("span",null,o.a.createElement("input",{type:"checkbox",onChange:r}),o.a.createElement("i",null,"\ucc38\uc5ec \uc911\uc778 \ubc29\ub9cc \ubcf4\uae30")))};var E=function(e){var t=e.id,n=e.members,a=e.active,r=e.status;return o.a.createElement(l.b,{to:"/chat/".concat(t)},o.a.createElement("li",{className:a?"active":""},o.a.createElement("div",{className:"d-flex bd-highlight"},o.a.createElement("div",{className:"img_cont"},o.a.createElement("img",{src:"https://static.turbosquid.com/Preview/001292/481/WV/_D.jpg",className:"rounded-circle user_img"}),o.a.createElement("span",{className:"online_icon ".concat(r?"":"offline")})),o.a.createElement("div",{className:"user_info"},o.a.createElement("span",null,t.toString()),o.a.createElement("p",null,"".concat(n.length,"\uba85 \ucc38\uac00\uc911"))))))};function b(){return Object(u.c)((function(e){return e.login})).name}var O=function(e){var t=e.filterRoomId,n=e.joinedRoomFlag,a=e.onClick,r=Object(u.c)((function(e){return e.rooms})),s=b();return Object(c.useEffect)((function(){}),[r,n]),o.a.createElement("div",{className:"card-body contacts_body"},o.a.createElement("div",{className:"contacts"},r.filter((function(e){return e.roomId.includes(t)})).filter((function(e){return!n||e.members.find((function(e){return e.name===s}))})).map((function(e){return o.a.createElement("div",{key:e.roomId,onClick:function(){return a(e.roomId)}},o.a.createElement(E,{id:e.roomId,members:e.members,active:!1,status:!1}))}))))};n(155);var h=function(e){var t=e.history,n=Object(c.useState)(""),a=Object(d.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(!1),l=Object(d.a)(i,2),m=l[0],f=l[1],v=function(){var e=Object(u.c)((function(e){return e.socketIO.socket}));return function(t){null===e||void 0===e||e.emit("enter-room",t)}}();!function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.socketIO.socket}));null===t||void 0===t||t.on("update-room-list",(function(t){e(Object(g.setRooms)(t))}))}();var E=Object(c.useCallback)((function(e){var t=e.target;f(t.checked)}),[]),b=Object(c.useCallback)((function(e){return v(e)}),[]);return o.a.createElement("div",{className:"col-md-4 col-xl-3 chat"},o.a.createElement("div",{className:"card mb-sm-3 mb-md-0 contacts_card"},o.a.createElement(p,{roomName:r,onChange:function(e){var t=e.target;s(t.value)},onKeyDown:function(e){13===e.keyCode&&""!==r&&(v(r),t.push("/chat/".concat(r)),s(""))},toggleCheck:E}),o.a.createElement(O,{filterRoomId:r,onClick:b,joinedRoomFlag:m}),o.a.createElement("div",{className:"card-footer"})))};var N=function(){return o.a.createElement("div",{className:"action_menu"},o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("i",{className:"fas fa-user-circle"})," View profile"),o.a.createElement("li",null,o.a.createElement("i",{className:"fas fa-users"})," Add to close friends"),o.a.createElement("li",null,o.a.createElement("i",{className:"fas fa-plus"})," Add to group"),o.a.createElement("li",null,o.a.createElement("i",{className:"fas fa-ban"})," Block")))};n(156);var y=function(e){var t=e.roomInfo;return o.a.createElement("div",{className:"card-header msg_head"},o.a.createElement("div",{className:"d-flex bd-highlight"},o.a.createElement("div",{className:"img_cont"},o.a.createElement("img",{src:"https://static.turbosquid.com/Preview/001292/481/WV/_D.jpg",className:"rounded-circle user_img"}),o.a.createElement("span",{className:"online_icon"})),o.a.createElement("div",{className:"user_info"},o.a.createElement("span",null,null===t||void 0===t?void 0:t.roomId),o.a.createElement("p",null,"".concat(null===t||void 0===t?void 0:t.members.length,"\uba85 \ucc38\uac00\uc911")))),o.a.createElement("span",{id:"action_menu_btn"},o.a.createElement("i",{className:"fas fa-ellipsis-v"})),o.a.createElement(N,null))};n(157);var I=function(e){var t=e.writer,n=e.message,a=e.date,r=b();return o.a.createElement("div",{className:"d-flex justify-content-".concat(t!==r?"start":"end"," mb-4")},t!==r?o.a.createElement("div",{className:"img_cont_msg"},o.a.createElement("img",{src:"https://static.turbosquid.com/Preview/001292/481/WV/_D.jpg",className:"rounded-circle user_img_msg"})):"",t!==r?o.a.createElement("div",{className:"msg_writer"},o.a.createElement("span",null,t)):"",o.a.createElement("div",{className:"msg_box msg_cotainer".concat(t!==r?"":"_send")},n,o.a.createElement("span",{className:"msg_time"},function(e){return e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})}(a))))};var j=function(e){var t=e.messages;return Object(c.useEffect)((function(){!function(e){var t=document.getElementsByClassName(e)[0];t.scrollTop=t.scrollHeight}("card-body")}),[t.length]),o.a.createElement("div",{className:"card-body msg_card_body"},t.map((function(e){var t=e.msgId,n=e.writer,a=e.message,r=e.date;return o.a.createElement(I,{key:t,writer:n,message:a,date:r})})))};n(158);var _=function(e){var t=function(e,t){var n=Object(c.useState)(e),a=Object(d.a)(n,2),r=a[0],o=a[1];return{value:r,onChange:function(e){var t=e.target;return o(t.value)},onKeyDown:function(e){if(13===e.keyCode&&""!==r){var n=!0,a=!1,c=void 0;try{for(var s,i=t[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){(0,s.value)(r)}}catch(u){a=!0,c=u}finally{try{n||null==i.return||i.return()}finally{if(a)throw c}}o("")}}}}("",[e.sendMessage]);return o.a.createElement("div",{className:"card-footer"},o.a.createElement("div",{className:"input-group"},o.a.createElement("div",{className:"input-group-append"},o.a.createElement("span",{className:"input-group-text attach_btn"},o.a.createElement("i",{className:"fas fa-paperclip"}))),o.a.createElement("input",Object.assign({className:"form-control type_msg",placeholder:"Type your message..."},t)),o.a.createElement("div",{className:"input-group-append"},o.a.createElement("span",{className:"input-group-text send_btn"},o.a.createElement("i",{className:"fas fa-location-arrow"})))))};var k=n(38),S=n(78);n(244);var w=function(e){var t,n=null===(t=e.match.params)||void 0===t?void 0:t.id,a=function(e){var t=Object(u.c)((function(e){return e.messages})).find((function(t){return t.roomId===e}));return void 0===t?[]:t.messages}(n),r=function(e){return Object(u.c)((function(e){return e.rooms})).find((function(t){return t.roomId===e}))}(n),s=function(e){var t=Object(u.b)(),n=Object(u.c)((function(e){return e.socketIO.socket})),a=b(),r=Object(c.useCallback)((function(t){return null===n||void 0===n?void 0:n.emit("send:message",{roomId:e,msgId:Object(S.generate)(12),writer:a,message:t,date:new Date})}),[]),o=Object(c.useCallback)((function(){return null===n||void 0===n?void 0:n.on("rcv:message",(function(e){t(Object(k.addMessage)(e.roomId,e.msgId,e.writer,e.message,new Date(e.date)))}))}),[n,t]),s=Object(c.useCallback)((function(n){return t(Object(k.addMessage)(e,Object(S.generate)(12),a,n,new Date))}),[t]);return{socketOff:Object(c.useCallback)((function(){return null===n||void 0===n?void 0:n.off("rcv:message")}),[n]),sendMessage:r,recieveMessage:o,addMsgToStore:s}}(n),i=s.recieveMessage,l=s.sendMessage,m=s.addMsgToStore,d=s.socketOff;return Object(c.useEffect)((function(){return i(),function(){d()}}),[]),o.a.createElement("div",{className:"col-md-8 col-xl-6 chat"},o.a.createElement("div",{className:"card"},o.a.createElement(y,{roomInfo:r}),o.a.createElement(j,{messages:a}),o.a.createElement(_,{sendMessage:l,addMsgToStore:m})))},C=n(53),L=function(){var e=Object(u.b)();return Object(c.useEffect)((function(){e(Object(C.connectServer)("http://localhost:5000"))}),[]),o.a.createElement("div",{className:"container-fluid h-100"},o.a.createElement("div",{className:"row justify-content-center h-100"},o.a.createElement(l.a,null,o.a.createElement(m.d,null,o.a.createElement(m.b,{path:r.SIGNIN,component:v}),o.a.createElement(m.b,{path:r.ROOM_LIST,component:h}),o.a.createElement(m.b,{path:r.CHAT,component:w})),o.a.createElement(m.a,{from:"/",to:r.SIGNIN}))))},M=n(28),R=Object(M.b)({messages:k.default,socketIO:C.default,login:f.default,rooms:g.default}),x=(n(274),n(275),Object(M.c)(R));i.a.render(o.a.createElement(u.a,{store:x},o.a.createElement(L,null)),document.getElementById("root"))},29:function(e,t,n){"use strict";var a=n(82);n.d(t,"default",(function(){return a.a}));var r=n(22);n.d(t,"setRooms",(function(){return r.e}));n(83)},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return o}));var a="messages/ADD_MESSAGE",r="messages/DELETE_MESSAGE",c="messages/REMOVE_ROOM_MSG",o=function(e,t,n,r,c){return{type:a,payload:{roomId:e,msgId:t,writer:n,message:r,date:c}}}},38:function(e,t,n){"use strict";var a=n(84);n.d(t,"default",(function(){return a.a}));var r=n(30);n.d(t,"addMessage",(function(){return r.d}));n(85)},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a="socket/CONNECT_SERVER",r=function(e){return{type:a,payload:e}}},53:function(e,t,n){"use strict";var a=n(123);n.d(t,"default",(function(){return a.a}));var r=n(51);n.d(t,"connectServer",(function(){return r.b}));n(138)},80:function(e,t,n){"use strict";var a=n(21),r={isLoading:!1,isLogin:!1,socketId:"",name:""};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.b:return{isLoading:!0,isLogin:!1,name:""};case a.a:return r;case a.d:return{isLoading:!1,isLogin:!0,socketId:t.payload.socketId,name:t.payload.name};case a.c:return{isLogin:!1};default:return e}}},81:function(e,t){},82:function(e,t,n){"use strict";var a=n(39),r=n(142),c=n(22),o=[];t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.a:var n="asfd";return e.concat({roomId:n,members:[t.payload]});case c.c:return e.filter((function(e){return e.roomId!==t.payload}));case c.b:return e.map((function(e){return e.roomId===t.payload.roomId?Object(r.a)({},e,{member:e.members.push({socketId:t.payload.socketId,name:t.payload.name})}):e}));case c.d:return Object(a.a)(t.payload);default:return e}}},83:function(e,t){},84:function(e,t,n){"use strict";var a=n(39),r=n(30),c=[];t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.a:var n=t.payload.roomId,o=e.findIndex((function(e){return e.roomId===n}));return delete t.payload.roomId,-1===o?e.push({roomId:n,messages:[t.payload]}):e[o].messages.push(t.payload),Object(a.a)(e);case r.b:return o=e.findIndex((function(e){return e.roomId===t.payload.roomId})),e[o].messages.filter((function(e){return e.msgId!==t.payload.msgId})),Object(a.a)(e);case r.c:return e.filter((function(e){return e.roomId!==t.payload}));default:return e}}},85:function(e,t){}},[[143,1,2]]]);
//# sourceMappingURL=main.0e40ffad.chunk.js.map